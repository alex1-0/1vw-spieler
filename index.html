<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OneWeekVaro - Teams & Stats</title>
    <style>
        /* Füge diese CSS-Regeln hinzu */
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }
        
        .kills-list {
            max-height: 150px;
            overflow-y: auto;
            padding-right: 5px;
        }
        
        .kills-list div {
            margin: 3px 0;
            padding: 3px;
            background-color: rgba(255,255,255,0.1);
            border-radius: 3px;
        }

        /* Rest des bestehenden CSS bleibt gleich */
        :root {
            --bg-dark: #121212;
            --bg-card: #1e1e1e;
            --accent: #4a80f0;
            --text-primary: #f0f0f0;
            --text-secondary: #b0b0b0;
            --eliminated: #f44336;
            --eliminated-bg: rgba(244, 67, 54, 0.1);
            --solo-survivor: #ff9800;
            --solo-bg: rgba(255, 152, 0, 0.1);
            --kill-count: #4caf50;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-primary);
            margin: 0;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--accent);
            padding-bottom: 15px;
        }
        
        h1 {
            color: var(--accent);
            margin-bottom: 5px;
            font-size: 2.5rem;
        }
        
        h2 {
            color: var(--accent);
            margin: 40px 0 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #333;
        }
        
        .subtitle {
            font-style: italic;
            color: var(--text-secondary);
        }
        
        .stats-header {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .stats-box {
            background-color: var(--bg-card);
            padding: 15px 25px;
            border-radius: 8px;
            text-align: center;
            min-width: 150px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .stats-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .alive { color: #4CAF50; }
        .dead { color: #F44336; }
        .teams-left { color: #FF9800; }
        
        .teams-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .team-card {
            background-color: var(--bg-card);
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            border-left: 3px solid var(--accent);
            position: relative;
        }
        
        .team-card.eliminated {
            opacity: 0.7;
            border-left-color: var(--eliminated);
            background-color: var(--eliminated-bg);
        }
        
        .team-card.solo-survivor {
            border-left-color: var(--solo-survivor);
            background-color: var(--solo-bg);
        }
        
        .team-card.eliminated::after {
            content: "ELIMINIERT";
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--eliminated);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .team-card.solo-survivor::after {
            content: "SOLO ÜBERLEBEND";
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--solo-survivor);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .team-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #333;
        }
        
        .team-number {
            background-color: var(--accent);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }
        
        .team-title {
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .players-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .player {
            display: flex;
            align-items: center;
            padding: 8px 10px;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            justify-content: space-between;
        }
        
        .player.eliminated {
            opacity: 0.6;
        }
        
        .player.eliminated .player-name {
            text-decoration: line-through;
        }
        
        .player-info {
            display: flex;
            align-items: center;
            flex-grow: 1;
        }
        
        .player-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #333;
            margin-right: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-size: cover;
        }
        
        .player-name {
            flex-grow: 1;
        }
        
        .kill-count {
            background-color: var(--kill-count);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .top-killers-container {
            max-width: 1400px;
            margin: 0 auto 30px;
            padding: 20px;
            background-color: rgba(30, 30, 30, 0.8);
            border-radius: 8px;
        }

        .top-killers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .killer-card {
            display: flex;
            align-items: center;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
        }
        
        @media (max-width: 768px) {
            .teams-container {
                grid-template-columns: 1fr;
            }
            
            .stats-header {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            
            .stats-box {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>OneWeekVaro</h1>
        <p class="subtitle">Teams und Statistiken</p>
    </div>
    
    <div class="stats-header">
        <div class="stats-box">
            <div>Spieler am Leben</div>
            <div class="stats-value alive" id="aliveCount">0</div>
        </div>
        <div class="stats-box">
            <div>Teams übrig</div>
            <div class="stats-value teams-left" id="teamsLeft">0</div>
        </div>
        <div class="stats-box">
            <div>Ausgeschieden</div>
            <div class="stats-value dead" id="deadCount">0</div>
        </div>
    </div>

    <div class="top-killers-container">
        <h2>Top 10 Killer</h2>
        <div class="top-killers-grid" id="topKillers">
            <!-- Wird automatisch befüllt -->
        </div>
    </div>
    
    <div class="teams-container" id="teamsContainer"></div>

    <script>
        // Team-Definitionen
        const teams = {
            1: ["zjonqs", "Jonas16v"],
            2: ["vileGid", "Armene"],
            3: ["OhitsDevoo", "hotzen"],
            4: ["Flo_0608", "MrChocolxte"],
            5: ["7G0AT", "Schmiti_"],
            6: ["Tim_Kreativbro", "PTC_YT"],
            7: ["Finnsel_Bimmsel", "F1nnK14"],
            8: ["KytenQx", "TypischTobi653"],
            9: ["PhilTimeTV", "__GodWalk__"],
            10: ["Omega_King21", "yEmpire"],
            11: ["Ringraid_", "Zidrohn"],
            12: ["zItacheyy", "FrozenKnightHD"],
            13: ["Nikk54", "SuperPiet7"],
            14: ["DerDerNichtsKann", "Dreix31"],
            15: ["Spidercrafti", "FelixT2008"],
            16: ["VaderKido", "Fylumenius"],
            17: ["zMomentum", "EisteeMan"],
            18: ["Ineedcutegirls", "Ineedgoodgirls"],
            19: ["praczy", "AlexOAT"],
            20: ["0boete", "tracksuitz"],
            21: ["SLManu", "Draco_2010"],
            22: ["LiveLucYT", "jannick421"],
            23: ["Too0God", "PamerDKing"],
            24: ["InvormativTV", "Loxxgamer"],
            25: ["Valle0311", "MikaDKing"],
            26: ["Naayrii", "MCKrediii"],
            27: ["MegaMeteor87", "MegaMeteor88"],
            28: ["MitDerNacht", "yujiSW"],
            29: ["deadston3", "EinM4nu"],
            30: ["hkbuddyy", "MRANDRU12"],
            31: ["Tempest1204", "Rage064"],
            32: ["MegaMeteor89", "einJonas65"],
            33: ["DieEnte1455", "Benowitch"],
            34: ["Nusse2011", "dxrkr0x"],
            35: ["EnteOnCrack", "Alpha_demil_47"],
            36: ["Somberlyy", "nurnoco"],
            37: ["kkeqqa", "JzSnoxy"],
            38: ["Swaxi5", "Jasko5"],
            39: ["UncleCreepin", "CuzImCreephim"],
            40: ["Schneeander", "OscarrinoTV"],
            41: ["Hushtrail", "KaiserOxy66"],
            42: ["Freddy_Kohlbein", "Brigitte420"],
            43: ["Lxk4z", "Snowfeather25"],
            44: ["Zane_69", "StarkillerBW"],
            45: ["DestenyLP", "CxEy7456"],
            46: ["4357k", "Nintendo97533"],
            47: ["PluureX", "Jan0schi"],
            48: ["Aka_220", "Rayan_Bgrr80x"],
            49: ["Clayten", "Sakurayy"],
            50: ["yukiime", "Jasko5_Twitchtv"],
            51: ["zphynix", "Tense12378"],
            52: ["Das_Streberchen", "bignose_00"],
            53: ["legiSimon", "CorgiWelpe"],
            54: ["xJuro", "HamudiIdumah"],
            55: ["jxgen", "OvertPrinter"],
            56: ["UsingDawn33", "Osckar"],
            57: ["Jobo2803", "Nineon1703"],
            58: ["OhitsEstelle", "mavegoat"],
            59: ["zMareke", "Limit_Los"]
        };

        // Server-Logs mit Todesmeldungen
        const deathLogs = [
            "[18:17:21] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: TypischTobi653 was slain by OhitsDevoo",
            "[18:17:46] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: OscarrinoTV was slain by Alpha_demil_47",
            "[18:18:09] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: CorgiWelpe was slain by HamudiIdumah",
            "[18:18:14] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: zphynix died",
            "[18:18:17] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: F1nnk14 was doomed to fall by Jasko5",
            "[18:18:29] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: Finnsel_Bimmsel was slain by Jasko5",
            "[18:18:48] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: 4357k was slain by EisteeMan",
            "[18:19:17] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: Nintendo97533 was slain by EisteeMan",
            "[18:19:28] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: Nineon1703 was slain by bignose_00",
            "[18:19:31] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: EnteOnCrack was slain by Jasko5",
            "[18:19:31] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: Jasko5 was slain by Alpha_demil_47",
            "[18:19:47] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: zMomentum was slain by Sakurayy",
            "[18:19:59] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: EisteeMan was slain by Clayten",
            "[18:22:33] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: kkeqqa hit the ground too hard while trying to escape Jasko5_Twitchtv",
            "[18:22:34] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: yukiime was slain by hotzen",
            "[18:22:36] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: Jasko5_Twitchtv was slain by hotzen",
            "[18:25:35] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: MegaMeteor88 was slain by Loxxgamer",
            "[18:25:37] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: Loxxgamer was slain by MegaMeteor87",
            "[18:26:02] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: MegaMeteor87 was slain by InvormativTV",
            "[18:34:15] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: KytenQx was slain by vileGid",
            "[18:36:32] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: yEmpire fell from a high place",
            "[18:38:55] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: jxgen was shot by Skeleton",
            "[18:42:43] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: Zidrohn was slain by zjonqs",
            "[18:45:30] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: Nusse2011 was slain by Schmiti_",
            "[18:45:51] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: PluureX was slain by vileGid",
            "[18:53:54] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: JzSnoxy fell from a high place",
            "[19:03:39] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: Jan0schi was slain by mavegoat",
            "[19:14:07] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: MrChocolxte tried to swim in lava to escape Armene",
            "[19:33:57] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: OhitsEstelle was slain by Osckar",
            "[19:35:05] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: mavegoat was slain by Osckar",
            "[19:51:23] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: legiSimon was slain by MegaMeteor89",
            "[19:54:44] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: PTC_YT was slain by OhitsDevoo",
            "[19:55:15] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: Nikk54 was slain by MitDerNacht",
            "[19:58:50] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: Tim_Kreativbro was slain by MegaMeteor89",
            "[20:02:45] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: HamudiIdumah was slain by tracksuitz",
            "[20:03:50] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: Ringraid_ was doomed to fall by MitDerNacht",
            "[20:09:50] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: xJuro drowned while trying to escape 0boete",
            "[20:27:22] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: MitDerNacht was burned to a crisp while fighting Osckar",
            "[20:27:30] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: yujiSW tried to swim in lava to escape UsingDawn33",
            "[20:31:00] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: SuperPiet7 was doomed to fall by Spider",
            "[20:33:15] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: Osckar was burned to a crisp while fighting EinM4nu",
            "[20:38:49] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: Jonas16v was slain by MegaMeteor89",
            "[20:42:51] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: einJonas65 was slain by zjonqs using §b[§oDiamantschwert1§b]",
            "[20:43:10] [Server thread/INFO]: [OneWeekVaro] [VARO] [DEATH] Message: zjonqs was slain by MegaMeteor89",
            "[VARO] [DEATH] Message: Schneeander was slain by Zombie",
            "[VARO] [DEATH] Message: Das_Streberchen left the confines of this world",
            "[VARO] [DEATH] Message: Zane_69 drowned",
            "[VARO] [DEATH] Message: DieEnte1455 tried to swim in lava",
            "[VARO] [DEATH] Message: Benowitch tried to swim in lava",
            "[VARO] [DEATH] Message: bignose_00 left the confines of this world",
            "[VARO] [DEATH] Message: AlexOAT left the confines of this world",
            "[VARO] [DEATH] Message: Freddy_Kohlbein died",
            "[VARO] [DEATH] Message: Brigitte420 died",
            "[VARO] [DEATH] Message: Schmiti_ was slain by SLManu",
            "[VARO] [DEATH] Message: 7G0AT burned to death",
            "[VARO] [DEATH] Message: Draco_2010 was burned to a crisp while fighting EinM4nu",
            "[VARO] [DEATH] Message: SLManu was slain by deadston3",
            "[VARO] [DEATH] Message: Fylumenius fell from a high place",
            "[VARO] [DEATH] Message: Jobo2803 fell from a high place",
            "[VARO] [DEATH] Message: FrozenKnightHD was burned to a crisp while fighting MegaMeteor89",
            "[VARO] [DEATH] Message: zItacheyy was slain by MegaMeteor89",
            "[VARO] [DEATH] Message: StarkillerBW was slain by MCKrediii",
            "[VARO] [DEATH] Message: MCKrediii hit the ground too hard while trying to escape MegaMeteor89",
            "[VARO] [DEATH] Message: Spidercrafti tried to swim in lava to escape deadston3",
            "[VARO] [DEATH] Message: FelixT2008 tried to swim in lava to escape deadston3",
            "[VARO] [DEATH] Message: Rayan_Bgrr80x died",
            "[VARO] [DEATH] Message: Sakurayy was slain by Snowfeather25",
            "[VARO] [DEATH] Message: Clayten was slain by Lxk4z",
            "[VARO] [DEATH] Message: ineedgoodgirls died",
            "[VARO] [DEATH] Message: ineedcutegirls died",
            "[VARO] [DEATH] Message: Tense12378 died",
            "[VARO] [DEATH] Message: Aka_220 died",
            "[VARO] [DEATH] Message: Limit_Los left the confines of this world",
            "[VARO] [DEATH] Message: zMareke was slain by EinM4nu",
            "[VARO] [DEATH] Message: UsingDawn33 left the confines of this world",
            "[VARO] [DEATH] Message: InvormativTV died",
            "[VARO] [DEATH] Message: Flo_0608 died",
            "[VARO] [DEATH] Message: Dreix31 died",
            "[VARO] [DEATH] Message: jannick421 died",
            "[VARO] [DEATH] Message: tracksuitz died",
            "[VARO] [DEATH] Message: VaderKido died",
            "[VARO] [DEATH] Message: praczy died",
            "[VARO] [DEATH] Message: OvertPrinter died"
        ];
        console.log(deathLogs.length)

        const notJoinedPlayers = [
            "CuzImCreepin",
            "UncleCreepin",
            "Swaxi5",
            "dxrkr0x",
            "Too0God",
            "PamerDKing",
            "Valle0311",
            "MikaDKing",
            "MRANDRU12",
            "hkbuddyy",
            "Brigitte420",
            "Freddy_Kohlbein",
            "DestenyLP",
            "CxEy7456",
            "__GodWalk__",
            "PhilTimeTV",
            "Omega_King21"
        ];
        console.log(notJoinedPlayers.length)
        
        // Initialisierung
        let eliminatedPlayers = {};
        let killStats = {};
        let playerKills = {}; // Speichert die Opfer jedes Spielers

        // Finde Team und Index eines Spielers
        function findPlayer(playerName) {
            const lowerName = playerName.toLowerCase();
            for (const [teamNum, players] of Object.entries(teams)) {
                const index = players.findIndex(p => p.toLowerCase() === lowerName);
                if (index !== -1) {
                    return { team: parseInt(teamNum), index };
                }
            }
            return null;
        }

        // Verarbeite die Todeslogs
        function processDeathLogs() {
            notJoinedPlayers.forEach(playerName => {
                // Finde den tatsächlichen Spielernamen aus den Teams
                const actualPlayerName = Object.values(teams).flat()
                    .find(p => p.toLowerCase() === playerName.toLowerCase());
                
                if (actualPlayerName) {
                    const playerInfo = findPlayer(actualPlayerName);
                    if (playerInfo) {
                        if (!eliminatedPlayers[playerInfo.team]) {
                            eliminatedPlayers[playerInfo.team] = [];
                        }
                        if (!eliminatedPlayers[playerInfo.team].includes(playerInfo.index)) {
                            eliminatedPlayers[playerInfo.team].push(playerInfo.index);
                        }
                    }
                }
            });
            
            deathLogs.forEach(log => {
                const deathMatch = log.match(/\[DEATH\] Message: (.+)/);
                if (!deathMatch) return;
                
                const deathMessage = deathMatch[1];
                let deadPlayer, killer;
                let deathType = "gestorben";
        
                // Extrahiere Toten und Killer basierend auf Todesart
                if (deathMessage.includes("was slain by")) {
                    [deadPlayer, killer] = deathMessage.split(" was slain by ");
                    deathType = "getötet";
                } 
                else if (deathMessage.includes("was shot by")) {
                    [deadPlayer, killer] = deathMessage.split(" was shot by ");
                    deathType = "erschossen";
                }
                else if (deathMessage.match(/was (pummeled|stabbed|burned|stung) to death by/)) {
                    [deadPlayer, killer] = deathMessage.split(/ was (?:pummeled|stabbed|burned|stung) to death by /);
                    deathType = "getötet";
                }
                else if (deathMessage.includes("tried to swim in lava to escape")) {
                    [deadPlayer, killer] = deathMessage.split(" tried to swim in lava to escape ");
                    deathType = "Lavaschaden (Flucht)";
                }
                else if (deathMessage.includes("was burned to a crisp while fighting")) {
                    [deadPlayer, killer] = deathMessage.split(" was burned to a crisp while fighting ");
                    deathType = "verbrannt (im Kampf)";
                }
                else if (deathMessage.includes("tried to swim in lava")) {
                    deadPlayer = deathMessage.split(" tried to swim in lava")[0];
                    deathType = "in Lava ertrunken";
                }
                else if (deathMessage.includes("drowned while trying to escape")) {
                    [deadPlayer, killer] = deathMessage.split(" drowned while trying to escape ");
                    deathType = "ertrunken (Flucht)";
                }
                else if (deathMessage.includes("drowned")) {
                    deadPlayer = deathMessage.split(" drowned")[0];
                    deathType = "ertrunken";
                }
                else if (deathMessage.includes("hit the ground too hard")) {
                    if (deathMessage.includes("while trying to escape")) {
                        [deadPlayer, killer] = deathMessage.split(" hit the ground too hard while trying to escape ");
                        deathType = "Fallschaden (Flucht)";
                    } else {
                        deadPlayer = deathMessage.split(" hit the ground too hard")[0];
                        deathType = "Fallschaden";
                    }
                }
                else if (deathMessage.includes("fell from a high place")) {
                    deadPlayer = deathMessage.split(" fell from a high place")[0];
                    deathType = "Fallschaden";
                }
                else if (deathMessage.includes("left the confines of this world")) {
                    deadPlayer = deathMessage.split(" left the confines of this world")[0];
                    deathType = "Border";
                }
                else if (deathMessage.includes("fell out of the world")) {
                    deadPlayer = deathMessage.split(" fell out of the world")[0];
                    deathType = "aus der Welt gefallen";
                }
                else if (deathMessage.includes("starved to death")) {
                    deadPlayer = deathMessage.split(" starved to death")[0];
                    deathType = "verhungert";
                }
                else if (deathMessage.includes("withered away")) {
                    deadPlayer = deathMessage.split(" withered away")[0];
                    deathType = "verwelkt";
                }
                else if (deathMessage.includes("was killed by magic")) {
                    deadPlayer = deathMessage.split(" was killed by magic")[0];
                    deathType = "Magie";
                }
                else if (deathMessage.includes("died")) {
                    deadPlayer = deathMessage.split(" died")[0];
                    deathType = "gestorben";
                }
                else if (deathMessage.includes("was doomed to fall by")) {
                    [deadPlayer, killer] = deathMessage.split(" was doomed to fall by ");
                    deathType = "Fallschaden (Kampf)";
                }

                // Markiere Spieler als tot
                if (deadPlayer) {
                    const playerInfo = findPlayer(deadPlayer);
                    if (playerInfo) {
                        if (!eliminatedPlayers[playerInfo.team]) {
                            eliminatedPlayers[playerInfo.team] = [];
                        }
                        if (!eliminatedPlayers[playerInfo.team].includes(playerInfo.index)) {
                            eliminatedPlayers[playerInfo.team].push(playerInfo.index);
                        }
                    }
                }

                // Zähle Kill und speichere Opfer
// In der processDeathLogs Funktion, wo Kills gezählt werden:
                if (killer) {
                    // Finde den originalen Spielernamen für den Killer
                    const actualKiller = Object.values(teams).flat()
                        .find(p => p.toLowerCase() === killer.toLowerCase()) || killer;
                    
                    killStats[actualKiller] = (killStats[actualKiller] || 0) + 1;
                    
                    if (!playerKills[actualKiller]) {
                        playerKills[actualKiller] = [];
                    }
                    
                    // Finde den originalen Spielernamen für das Opfer
                    const actualDeadPlayer = Object.values(teams).flat()
                        .find(p => p.toLowerCase() === deadPlayer.toLowerCase()) || deadPlayer;
                    
                    playerKills[actualKiller].push({
                        player: actualDeadPlayer,
                        type: deathType
                    });
                }
            });
        }

        // Berechne Statistiken
        function calculateStats() {
            const totalPlayers = Object.values(teams).reduce((sum, team) => sum + team.length, 0);
            const deadCount = Object.values(eliminatedPlayers).reduce((sum, deadIndices) => sum + deadIndices.length, 0);
            const aliveCount = totalPlayers - deadCount;
            
            // Aktive Teams zählen
            const activeTeams = Object.entries(teams).reduce((count, [teamNum, players]) => {
                const deadPlayers = eliminatedPlayers[teamNum] ? eliminatedPlayers[teamNum].length : 0;
                return deadPlayers < players.length ? count + 1 : count;
            }, 0);

            return { totalPlayers, aliveCount, deadCount, activeTeams };
        }

        // Zeige Teams an
        function renderTeams() {
            const container = document.getElementById('teamsContainer');
            container.innerHTML = '';
            
            const stats = calculateStats();
            document.getElementById('aliveCount').textContent = stats.aliveCount;
            document.getElementById('deadCount').textContent = stats.deadCount;
            document.getElementById('teamsLeft').textContent = stats.activeTeams;

            for (const [teamNumber, players] of Object.entries(teams)) {
                const teamNum = parseInt(teamNumber);
                const deadPlayers = eliminatedPlayers[teamNum] || [];
                const isEliminated = deadPlayers.length === players.length;
                const isSoloSurvivor = deadPlayers.length === players.length - 1;

                const teamCard = document.createElement('div');
                teamCard.className = 'team-card';
                if (isEliminated) teamCard.classList.add('eliminated');
                if (isSoloSurvivor) teamCard.classList.add('solo-survivor');

                const teamHeader = document.createElement('div');
                teamHeader.className = 'team-header';
                
                const teamNumberElement = document.createElement('div');
                teamNumberElement.className = 'team-number';
                teamNumberElement.textContent = teamNumber;
                
                const teamTitle = document.createElement('div');
                teamTitle.className = 'team-title';
                teamTitle.textContent = `Team ${teamNumber}`;
                
                teamHeader.appendChild(teamNumberElement);
                teamHeader.appendChild(teamTitle);
                
                const playersList = document.createElement('div');
                playersList.className = 'players-list';
                
                players.forEach((player, index) => {
                    const playerElement = document.createElement('div');
                    playerElement.className = 'player';
                    if (deadPlayers.includes(index)) {
                        playerElement.classList.add('eliminated');
                    }
                    
                    const playerInfo = document.createElement('div');
                    playerInfo.className = 'player-info';
                    
                    const playerIcon = document.createElement('div');
                    playerIcon.className = 'player-icon';
                    playerIcon.style.backgroundImage = `url('https://mc-heads.net/avatar/${player}/32')`;
                    
                    const playerName = document.createElement('div');
                    playerName.className = 'player-name tooltip';
                    playerName.textContent = player;
                    
                    // Füge Tooltip mit Kill-Informationen hinzu
                    if (playerKills[player] && playerKills[player].length > 0) {
                        const tooltip = document.createElement('span');
                        tooltip.className = 'tooltiptext';
                        
                        const tooltipTitle = document.createElement('div');
                        tooltipTitle.textContent = `Kills (${playerKills[player].length}):`;
                        tooltipTitle.style.fontWeight = 'bold';
                        tooltipTitle.style.marginBottom = '5px';
                        
                        const killsList = document.createElement('div');
                        killsList.className = 'kills-list';
                        
                        playerKills[player].forEach(kill => {
                            const killEntry = document.createElement('div');
                            killEntry.textContent = `${kill.player} (${kill.type})`;
                            killsList.appendChild(killEntry);
                        });
                        
                        tooltip.appendChild(tooltipTitle);
                        tooltip.appendChild(killsList);
                        playerName.appendChild(tooltip);
                    }
                    
                    playerInfo.appendChild(playerIcon);
                    playerInfo.appendChild(playerName);
                    
                    const killsElement = document.createElement('div');
                    if (killStats[player]) {
                        killsElement.className = 'kill-count';
                        killsElement.textContent = killStats[player];
                    }
                    
                    playerElement.appendChild(playerInfo);
                    playerElement.appendChild(killsElement);
                    playersList.appendChild(playerElement);
                });
                
                teamCard.appendChild(teamHeader);
                teamCard.appendChild(playersList);
                container.appendChild(teamCard);
            }
        }

        function renderTopKillers() {
            const killers = Object.entries(killStats)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10); // Top 10
            
            const container = document.getElementById('topKillers');
            container.innerHTML = '';
            
            killers.forEach(([player, kills]) => {
                const card = document.createElement('div');
                card.className = 'killer-card tooltip';
                
                card.innerHTML = `
                    <div class="player-icon" style="background-image: url('https://mc-heads.net/avatar/${player}/32')"></div>
                    <div style="margin-left: 10px">
                        <strong>${player}</strong><br>
                        ${kills} Kills
                    </div>
                `;
                
                // Füge Tooltip für Top-Killer hinzu
                if (playerKills[player] && playerKills[player].length > 0) {
                    const tooltip = document.createElement('span');
                    tooltip.className = 'tooltiptext';
                    
                    const tooltipTitle = document.createElement('div');
                    tooltipTitle.textContent = `Kills (${playerKills[player].length}):`;
                    tooltipTitle.style.fontWeight = 'bold';
                    tooltipTitle.style.marginBottom = '5px';
                    
                    const killsList = document.createElement('div');
                    killsList.className = 'kills-list';
                    
                    playerKills[player].forEach(kill => {
                        const killEntry = document.createElement('div');
                        killEntry.textContent = `${kill.player} (${kill.type})`;
                        killsList.appendChild(killEntry);
                    });
                    
                    tooltip.appendChild(tooltipTitle);
                    tooltip.appendChild(killsList);
                    card.appendChild(tooltip);
                }
                
                container.appendChild(card);
            });
        }

        // Initialisierung beim Laden
        processDeathLogs();
        renderTopKillers();
        renderTeams();
    </script>
</body>
</html>
